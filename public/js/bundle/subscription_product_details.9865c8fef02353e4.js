/*! For license information please see subscription_product_details.9865c8fef02353e4.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2791],{428:(t,e,i)=>{i.r(e),i.d(e,{default:()=>p});function n(){var t,e,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.toStringTag||"@@toStringTag";function o(i,n,s,a){var o=n&&n.prototype instanceof l?n:l,u=Object.create(o.prototype);return r(u,"_invoke",function(i,n,r){var s,a,o,l=0,u=r||[],p=!1,d={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,i){return s=e,a=0,o=t,d.n=i,c}};function v(i,n){for(a=i,o=n,e=0;!p&&l&&!r&&e<u.length;e++){var r,s=u[e],v=d.p,f=s[2];i>3?(r=f===n)&&(o=s[(a=s[4])?5:(a=3,3)],s[4]=s[5]=t):s[0]<=v&&((r=i<2&&v<s[1])?(a=0,d.v=n,d.n=s[1]):v<f&&(r=i<3||s[0]>n||n>f)&&(s[4]=i,s[5]=n,d.n=f,a=0))}if(r||i>1)return c;throw p=!0,n}return function(r,u,f){if(l>1)throw TypeError("Generator is already running");for(p&&1===u&&v(u,f),a=u,o=f;(e=a<2?t:o)||!p;){s||(a?a<3?(a>1&&(d.n=-1),v(a,o)):d.n=o:d.v=o);try{if(l=2,s){if(a||(r="next"),e=s[r]){if(!(e=e.call(s,o)))throw TypeError("iterator result is not an object");if(!e.done)return e;o=e.value,a<2&&(a=0)}else 1===a&&(e=s.return)&&e.call(s),a<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),a=1);s=t}else if((e=(p=d.n<0)?o:i.call(n,d))!==c)break}catch(e){s=t,a=1,o=e}finally{l=1}}return{value:e,done:p}}}(i,s,a),!0),u}var c={};function l(){}function u(){}function p(){}e=Object.getPrototypeOf;var d=[][s]?e(e([][s]())):(r(e={},s,function(){return this}),e),v=p.prototype=l.prototype=Object.create(d);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,r(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t}return u.prototype=p,r(v,"constructor",p),r(p,"constructor",u),u.displayName="GeneratorFunction",r(p,a,"GeneratorFunction"),r(v),r(v,a,"Generator"),r(v,s,function(){return this}),r(v,"toString",function(){return"[object Generator]"}),(n=function(){return{w:o,m:f}})()}function r(t,e,i,n){var s=Object.defineProperty;try{s({},"",{})}catch(t){s=0}r=function(t,e,i,n){function a(e,i){r(t,e,function(t){return this._invoke(e,i,t)})}e?s?s(t,e,{value:i,enumerable:!n,configurable:!n,writable:!n}):t[e]=i:(a("next",0),a("throw",1),a("return",2))},r(t,e,i,n)}function s(t,e,i,n,r,s,a){try{var o=t[s](a),c=o.value}catch(t){return void i(t)}o.done?e(c):Promise.resolve(c).then(n,r)}const a={data:function(){return{loading:!1,subscription:{},invoices:[],invoiceFields:[]}},mounted:function(){var t=this.$route.params.id;this.loadSubscription(t)},methods:{loadSubscription:function(t){var e,i=this;return(e=n().m(function e(){var r,s;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return i.loading=!0,e.p=1,e.n=2,axios.get("/subscriptions/".concat(t));case 2:r=e.v,s=r.data,i.subscription=s.subscription,i.invoices=s.invoices,i.invoiceFields=s.invoiceFields,e.n=4;break;case 3:e.p=3,e.v,i.$bvToast.toast("Unable to load subscription details",{variant:"danger",title:"Error",solid:!0});case 4:return e.p=4,i.loading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}),function(){var t=this,i=arguments;return new Promise(function(n,r){var a=e.apply(t,i);function o(t){s(a,n,r,o,c,"next",t)}function c(t){s(a,n,r,o,c,"throw",t)}o(void 0)})})()},initiateInitialPayment:function(t){this.$bvModal.msgBoxConfirm("Are you sure you want to initiate the first payment?",{title:"Confirm Payment",okTitle:"Yes",cancelTitle:"Cancel",centered:!0}).then(function(e){e&&(window.location.href="/api/subscriptions/".concat(t,"/pay"))})},getStatusVariant:function(t){return{active:"success",unpaid:"danger",partial:"warning",paid:"success"}[t]||"secondary"}}};var o=i(85072),c=i.n(o),l=i(32635),u={insert:"head",singleton:!1};c()(l.A,u);l.A.locals;const p=(0,i(14486).A)(a,function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("Subscription_details"),folder:t.$t("Subscriptions")}}),t._v(" "),t.loading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t._e(),t._v(" "),t.loading?t._e():e("b-card",{staticClass:"shadow-sm border-0 p-3"},[e("b-row",[e("b-col",{staticClass:"text-center",attrs:{md:"4"}},[e("b-avatar",{attrs:{variant:"primary",size:"5rem"}},[e("i",{staticClass:"i-User"})]),t._v(" "),e("h5",{staticClass:"mt-3"},[t._v(t._s(t.subscription.client))]),t._v(" "),e("b-badge",{staticClass:"mt-2",attrs:{variant:t.getStatusVariant(t.subscription.status)}},[t._v("\n          "+t._s(t.subscription.status)+"\n        ")])],1),t._v(" "),e("b-col",{attrs:{md:"8"}},[e("b-list-group",{attrs:{flush:""}},[e("b-list-group-item",{staticClass:"d-flex align-items-center"},[e("i",{staticClass:"i-Box text-primary mr-2"}),t._v(" "),e("strong",{staticStyle:{"padding-right":"10px"}},[t._v(t._s(t.$t("ProductName"))+": ")]),t._v(" "+t._s(t.subscription.product)+"\n          ")]),t._v(" "),e("b-list-group-item",{staticClass:"d-flex align-items-center"},[e("i",{staticClass:"i-Warehouse text-success mr-2"}),t._v(" "),e("strong",{staticStyle:{"padding-right":"10px"}},[t._v(t._s(t.$t("warehouse"))+": ")]),t._v(" "+t._s(t.subscription.warehouse)+"\n          ")]),t._v(" "),e("b-list-group-item",{staticClass:"d-flex align-items-center"},[e("i",{staticClass:"i-Repeat text-warning mr-2"}),t._v(" "),e("strong",{staticStyle:{"padding-right":"10px"}},[t._v(t._s(t.$t("Billing_Cycle"))+": ")]),t._v(" "+t._s(t.subscription.billing_cycle)+"\n          ")]),t._v(" "),e("b-list-group-item",{staticClass:"d-flex align-items-center"},[e("i",{staticClass:"i-Money text-danger mr-2"}),t._v(" "),e("strong",{staticStyle:{"padding-right":"10px"}},[t._v(t._s(t.$t("Price_Per_Cycle"))+": ")]),t._v(" "),e("span",{staticClass:"text-success"},[t._v(" "+t._s(t.subscription.price_per_cycle))])]),t._v(" "),e("b-list-group-item",{staticClass:"d-flex align-items-center"},[e("i",{staticClass:"i-Calendar text-info mr-2"}),t._v(" "),e("strong",{staticStyle:{"padding-right":"10px"}},[t._v(t._s(t.$t("next_billing_date"))+": ")]),t._v(" "),e("b-badge",{attrs:{variant:"info"}},[t._v(" "+t._s(t.subscription.next_billing_date))])],1)],1)],1)],1)],1),t._v(" "),t.loading?t._e():e("b-card",{staticClass:"mt-4 shadow-sm border-0",attrs:{title:"Invoices Report"}},[e("b-table",{attrs:{items:t.invoices,fields:t.invoiceFields,bordered:"",responsive:""},scopedSlots:t._u([{key:"cell(ref)",fn:function(i){return[e("i",{staticClass:"i-File-Text text-primary"}),t._v(" "),e("b-link",{attrs:{href:"/app/sales/detail/".concat(i.item.sale_id)}},[t._v("\n          "+t._s(i.item.ref)+"\n        ")])]}},{key:"cell(date)",fn:function(i){return[e("i",{staticClass:"i-Calendar text-warning"}),t._v(" "+t._s(i.item.date)+"\n      ")]}},{key:"cell(total)",fn:function(i){return[e("i",{staticClass:"i-Money text-success"}),t._v(" $"+t._s(i.item.total)+"\n      ")]}},{key:"cell(status)",fn:function(i){return[e("b-badge",{attrs:{variant:t.getStatusVariant(i.item.status)}},[t._v("\n          "+t._s(i.item.status)+"\n        ")])]}}],null,!1,3668756714)})],1)],1)},[],!1,null,null,null).exports},32635:(t,e,i)=>{i.d(e,{A:()=>s});var n=i(76314),r=i.n(n)()(function(t){return t[1]});r.push([t.id,".i-Box,.i-Calendar,.i-File-Text,.i-Money,.i-Repeat,.i-User,.i-Warehouse{font-size:1.2rem}",""]);const s=r}}]);