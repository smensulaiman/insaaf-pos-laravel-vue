"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4758],{82952:(t,e,r)=>{r.r(e),r.d(e,{default:()=>l});var o=r(95353),n=r(5947),i=r.n(n);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const u={metaInfo:{title:"Opening Stock Import"},data:function(){return{isLoading:!0,SubmitProcessing:!1,Submit_Processing_detail:!1,data:new FormData,warehouses:[],import_products:"",warehouse_id:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,o.L8)(["currentUserPermissions","currentUser"])),methods:{onFileSelected:function(t){this.import_products="";var e=t.target.files[0];this.import_products=e},Submit_Stock:function(){var t=this;this.$refs.ref_Create_Stock.validate().then((function(e){e?t.Create_Stock():t.makeToast("danger",t.$t("Please_fill_the_form_correctly"),t.$t("Failed"))}))},getValidationState:function(t){var e=t.dirty,r=t.validated,o=t.valid;return e||r?void 0===o?null:o:null},makeToast:function(t,e,r){this.$root.$bvToast.toast(e,{title:r,variant:t,solid:!0})},formatNumber:function(t,e){var r=("string"==typeof t?t:t.toString()).split(".");if(e<=0)return r[0];var o=r[1]||"";if(o.length>e)return"".concat(r[0],".").concat(o.substr(0,e));for(;o.length<e;)o+="0";return"".concat(r[0],".").concat(o)},Create_Stock:function(){var t=this;this.SubmitProcessing=!0,i().start(),i().set(.1);var e=this;e.data.append("warehouse_id",e.warehouse_id),e.data.append("products",e.import_products),axios.post("opening_stock_import",e.data).then((function(e){i().done(),t.makeToast("success",t.$t("Successfully_Imported"),t.$t("Success")),t.SubmitProcessing=!1,t.$router.push({name:"index_products"})})).catch((function(e){i().done(),t.makeToast("danger","An error occurred while processing the CSV file.",t.$t("Failed")),t.SubmitProcessing=!1}))},GetElements:function(){var t=this;axios.get("get_import_stock").then((function(e){t.warehouses=e.data.warehouses,t.isLoading=!1})).catch((function(e){setTimeout((function(){t.isLoading=!1}),500)}))}},created:function(){this.GetElements()}};const l=(0,r(14486).A)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("Opening_Stock"),folder:t.$t("Products")}}),t._v(" "),t.isLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t._e(),t._v(" "),t.isLoading?t._e():e("validation-observer",{ref:"ref_Create_Stock"},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.Submit_Stock.apply(null,arguments)}}},[e("b-row",[e("b-col",{attrs:{lg:"12",md:"12",sm:"12"}},[e("b-card",[e("b-row",[e("b-col",{staticClass:"mb-3",attrs:{lg:"4",md:"4",sm:"12"}},[e("validation-provider",{attrs:{name:"warehouse",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.valid,n=r.errors;return e("b-form-group",{attrs:{label:t.$t("warehouse")+" *"}},[e("v-select",{class:{"is-invalid":!!n.length},attrs:{state:!n[0]&&(!!o||null),reduce:function(t){return t.value},placeholder:t.$t("Choose_Warehouse"),options:t.warehouses.map((function(t){return{label:t.name,value:t.id}}))},model:{value:t.warehouse_id,callback:function(e){t.warehouse_id=e},expression:"warehouse_id"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(n[0]))])],1)}}],null,!1,3019504310)})],1),t._v(" "),e("b-col",{staticClass:"mb-3",attrs:{lg:"4",md:"4",sm:"12"}},[e("b-form-group",{attrs:{label:"Choose Csv File *"}},[e("input",{attrs:{type:"file",label:"Choose Csv File"},on:{change:t.onFileSelected}}),t._v(" "),e("b-form-invalid-feedback",{staticClass:"d-block",attrs:{id:"File-feedback"}},[t._v(t._s(t.$t("field_must_be_in_csv_format")))])],1)],1),t._v(" "),e("b-col",{staticClass:"mb-3",attrs:{lg:"4",md:"4",sm:"12"}},[e("b-button",{attrs:{href:"/import/exemples/import_stock.csv",variant:"info",size:"sm",block:""}},[t._v(t._s(t.$t("Download_exemple")))])],1),t._v(" "),e("b-col",{attrs:{md:"12"}},[e("b-form-group",[e("b-button",{attrs:{variant:"primary",disabled:t.SubmitProcessing},on:{click:t.Submit_Stock}},[e("i",{staticClass:"i-Yes me-2 font-weight-bold"}),t._v(" "+t._s(t.$t("submit")))]),t._v(" "),t.SubmitProcessing?t._m(0):t._e()],1)],1)],1)],1)],1)],1)],1)],1)],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"typo__p"},[t("div",{staticClass:"spinner sm spinner-primary mt-3"})])}],!1,null,null,null).exports}}]);