"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1231],{46781:(t,e,r)=>{r.r(e),r.d(e,{default:()=>s});var o=r(5947),a=r.n(o);const l={metaInfo:{title:"Create Subscription"},data:function(){return{isLoading:!0,SubmitProcessing:!1,accounts:[],deposit_category:[],form:{date:(new Date).toISOString().slice(0,10),user_id:null,client_id:null,product_id:null,warehouse_id:null,total_cycles:12,cycle_type:"monthly",billing_cycle:"monthly",remaining_cycles:12,price_per_cycle:0,price_per_unit:0,quantity:1,next_billing_date:(new Date).toISOString().slice(0,10),status:"active"},clients:[],products:[],warehouses:[]}},methods:{Submit_subscription:function(){var t=this;this.$refs.ref_for_subscription.validate().then((function(e){e?t.Store_subscription():t.makeToast("danger",t.$t("Please_fill_the_form_correctly"),t.$t("Failed"))}))},makeToast:function(t,e,r){this.$root.$bvToast.toast(e,{title:r,variant:t,solid:!0})},getValidationState:function(t){var e=t.dirty,r=t.validated,o=t.valid;return e||r?void 0===o?null:o:null},Store_subscription:function(){var t=this;this.SubmitProcessing=!0,a().start(),a().set(.1),axios.post("subscriptions",{subscription:this.form}).then((function(e){a().done(),t.SubmitProcessing=!1,t.$router.push({name:"subscription_product"}),t.makeToast("success",t.$t("Successfully_Created"),t.$t("Success"))})).catch((function(e){a().done(),t.makeToast("danger",t.$t("InvalidData"),t.$t("Failed")),t.SubmitProcessing=!1}))},GetElements:function(){var t=this;axios.get("subscriptions/create").then((function(e){t.clients=e.data.clients,t.products=e.data.products,t.warehouses=e.data.warehouses,t.isLoading=!1})).catch((function(e){setTimeout((function(){t.isLoading=!1}),500)}))}},created:function(){this.GetElements()}};const s=(0,r(14486).A)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("Create_Susbscription"),folder:t.$t("Subscriptions")}}),t._v(" "),t.isLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t._e(),t._v(" "),t.isLoading?t._e():e("validation-observer",{ref:"ref_for_subscription"},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.Submit_subscription.apply(null,arguments)}}},[e("b-row",[e("b-col",{attrs:{lg:"12",md:"12",sm:"12"}},[e("b-card",[e("b-row",[e("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"Date",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.errors;return[e("b-form-group",{attrs:{label:t.$t("date")+" *"}},[e("b-form-input",{attrs:{type:"date",state:!o.length},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(o[0]))])],1)]}}],null,!1,3920965647)})],1),t._v(" "),e("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"client",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.valid,a=r.errors;return e("b-form-group",{attrs:{label:t.$t("Customer")+" *"}},[e("v-select",{class:{"is-invalid":!!a.length},attrs:{state:!a[0]&&(!!o||null),reduce:function(t){return t.value},placeholder:t.$t("Choose_Customer"),options:t.clients.map((function(t){return{label:t.name,value:t.id}}))},model:{value:t.form.client_id,callback:function(e){t.$set(t.form,"client_id",e)},expression:"form.client_id"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(a[0]))])],1)}}],null,!1,3230904614)})],1),t._v(" "),e("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"warehouse",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.valid,a=r.errors;return e("b-form-group",{attrs:{label:t.$t("warehouse")+" *"}},[e("v-select",{class:{"is-invalid":!!a.length},attrs:{state:!a[0]&&(!!o||null),reduce:function(t){return t.value},placeholder:t.$t("Choose_Warehouse"),options:t.warehouses.map((function(t){return{label:t.name,value:t.id}}))},model:{value:t.form.warehouse_id,callback:function(e){t.$set(t.form,"warehouse_id",e)},expression:"form.warehouse_id"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(a[0]))])],1)}}],null,!1,920962394)})],1),t._v(" "),e("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"product",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.valid,a=r.errors;return e("b-form-group",{attrs:{label:t.$t("ProductName")+" *"}},[e("v-select",{class:{"is-invalid":!!a.length},attrs:{state:!a[0]&&(!!o||null),reduce:function(t){return t.value},placeholder:t.$t("SelectProduct"),options:t.products.map((function(t){return{label:t.name,value:t.id}}))},model:{value:t.form.product_id,callback:function(e){t.$set(t.form,"product_id",e)},expression:"form.product_id"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(a[0]))])],1)}}],null,!1,2099491033)})],1),t._v(" "),e("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"total_cycles",rules:{required:!0,min:1}},scopedSlots:t._u([{key:"default",fn:function(r){return[e("b-form-group",{attrs:{label:t.$t("total_cycles")+" *"},scopedSlots:t._u([{key:"label",fn:function(){return[t._v("\n                      Total Cycles *  \n                    "),e("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"text-info font-weight-bold i-Speach-BubbleAsking",attrs:{title:"How long the subscription lasts (e.g., 12 months, 52 weeks, 3 years)"}})]},proxy:!0}],null,!0)},[t._v(" "),e("b-input-group",[e("b-form-input",{attrs:{type:"number",min:"1",state:!r.errors.length,"aria-describedby":"totalCycles-feedback"},model:{value:t.form.total_cycles,callback:function(e){t.$set(t.form,"total_cycles",e)},expression:"form.total_cycles"}}),t._v(" "),e("b-input-group-append",[e("b-form-select",{model:{value:t.form.cycle_type,callback:function(e){t.$set(t.form,"cycle_type",e)},expression:"form.cycle_type"}},[e("option",{attrs:{value:"monthly"}},[t._v("Months")]),t._v(" "),e("option",{attrs:{value:"weekly"}},[t._v("Weeks")]),t._v(" "),e("option",{attrs:{value:"yearly"}},[t._v("Years")])])],1)],1),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"totalCycles-feedback"}},[t._v(t._s(r.errors[0]))])],1)]}}],null,!1,2104392155)})],1),t._v(" "),e("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"Billing Cycle",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.errors;return[e("b-form-group",{attrs:{label:t.$t("Billing_Cycle")+" *"},scopedSlots:t._u([{key:"label",fn:function(){return[t._v("\n                      Billing Cycle *  \n                    "),e("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"text-info font-weight-bold i-Speach-BubbleAsking",attrs:{title:"How often the user pays (e.g., monthly, weekly, yearly)"}})]},proxy:!0}],null,!0)},[t._v(" "),e("b-form-select",{attrs:{state:!o.length},model:{value:t.form.billing_cycle,callback:function(e){t.$set(t.form,"billing_cycle",e)},expression:"form.billing_cycle"}},[e("option",{attrs:{value:"monthly"}},[t._v("Monthly")]),t._v(" "),e("option",{attrs:{value:"weekly"}},[t._v("Weekly")]),t._v(" "),e("option",{attrs:{value:"yearly"}},[t._v("Yearly")])]),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(o[0]))])],1)]}}],null,!1,893775189)})],1),t._v(" "),e("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"Price per Cycle",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.errors;return[e("b-form-group",{attrs:{label:t.$t("Price_Per_Cycle")+" *"}},[e("b-form-input",{attrs:{type:"number",step:"0.01",state:!o.length},model:{value:t.form.price_per_cycle,callback:function(e){t.$set(t.form,"price_per_cycle",e)},expression:"form.price_per_cycle"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(o[0]))])],1)]}}],null,!1,3446132195)})],1),t._v(" "),e("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"Quantity",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.errors;return[e("b-form-group",{attrs:{label:t.$t("Quantity")+" *"}},[e("b-form-input",{attrs:{type:"number",state:!o.length},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",e)},expression:"form.quantity"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(o[0]))])],1)]}}],null,!1,1354776984)})],1),t._v(" "),e("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"Price per Unit",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.errors;return[e("b-form-group",{attrs:{label:t.$t("Price_Per_Unit")+" *"}},[e("b-form-input",{attrs:{type:"number",step:"0.01",state:!o.length},model:{value:t.form.price_per_unit,callback:function(e){t.$set(t.form,"price_per_unit",e)},expression:"form.price_per_unit"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(o[0]))])],1)]}}],null,!1,306866019)})],1),t._v(" "),e("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"Next Billing Date",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.errors;return[e("b-form-group",{attrs:{label:t.$t("next_billing_date")+" *"}},[e("b-form-input",{attrs:{type:"date",state:!o.length},model:{value:t.form.next_billing_date,callback:function(e){t.$set(t.form,"next_billing_date",e)},expression:"form.next_billing_date"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(o[0]))])],1)]}}],null,!1,1518314319)})],1),t._v(" "),e("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[e("validation-provider",{attrs:{name:"Status",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.errors;return[e("b-form-group",{attrs:{label:t.$t("Status")+" *"}},[e("b-form-select",{attrs:{state:!o.length},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[e("option",{attrs:{value:"active"}},[t._v(t._s(t.$t("Active")))]),t._v(" "),e("option",{attrs:{value:"canceled"}},[t._v(t._s(t.$t("Canceled")))]),t._v(" "),e("option",{attrs:{value:"completed"}},[t._v(t._s(t.$t("Completed")))])]),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(o[0]))])],1)]}}],null,!1,1035265062)})],1),t._v(" "),e("b-col",{attrs:{md:"12"}},[e("b-form-group",[e("b-button",{attrs:{variant:"primary",type:"submit",disabled:t.SubmitProcessing}},[e("i",{staticClass:"i-Yes me-2 font-weight-bold"}),t._v(" "+t._s(t.$t("submit")))]),t._v(" "),t.SubmitProcessing?t._m(0):t._e()],1)],1)],1)],1)],1)],1)],1)],1)],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"typo__p"},[t("div",{staticClass:"spinner sm spinner-primary mt-3"})])}],!1,null,null,null).exports}}]);